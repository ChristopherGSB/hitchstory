base: |
  # -*- coding: utf-8 -*-
  from path import Path
  import sure
  import sys
  
  if sys.version_info[0] == 3:
    unicode = str
  
  {% if variables %}
  {% for name, value in variables.items() %}
  {{ name }} = u"""{{ value }}"""
  {% endfor %}
  {% endif %}
  
  try:
      {{ setup|indent(4) }}
  except Exception as error:
      Path("{{ error_path }}").write_bytes(unicode(error).encode('utf8'))
      sys.exit()
  
  {% block main %}

  {% endblock %}
shouldbeequal: |
  {% extends 'base' %}

  {% block main %}
  try:
      ({{ code }}).should.be.equal({{ rhs }})
  except Exception as error:
      Path("{{ error_path }}").write_bytes(unicode(error).encode('utf8'))
  {% endblock %}
run_code: |
  {% extends 'base' %}

  {% block main %}
  try:
      {{ code|indent(4) }}
  except Exception as error:
      Path("{{ error_path }}").write_bytes(unicode(error).encode('utf8'))
  {% endblock %}
